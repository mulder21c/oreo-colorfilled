(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{183:function(e,t,n){"use strict";n.r(t);n(184),n(83),n(54),n(55);var i=n(67),r=n.n(i),s=n(7);new r.a({root:document.querySelector(".oreo-introduce"),slide:document.querySelector(".slides"),slideItems:document.querySelectorAll(".slides__item"),prevBtn:document.querySelector(".slides__controls__prev"),nextBtn:document.querySelector(".slides__controls__next")}),s.a.clear()},184:function(e,t,n){},67:function(e,t,n){e.exports=n(84)},7:function(e,t,n){"use strict";var i=n(12),r=n.n(i),s=n(13),o=n.n(s),c=n(2),a=n.n(c),l=n(0),u=n.n(l),d=n(3),v=n.n(d),f=n(8),g=n.n(f),h=n(4),b=n.n(h),m=n(14),x=n.n(m),p=n(19),I=n.n(p),y=n(15),w=n.n(y),A=n(18),L=n.n(A);function k(e,t){var n=x()(e);if(b.a){var i=b()(e);t&&(i=g()(i).call(i,(function(t){return v()(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)u()(n=k(Object(i),!0)).call(n,(function(t){w()(e,t,i[t])}));else if(a.a)o()(e,a()(i));else{var s;u()(s=k(Object(i))).call(s,(function(t){r()(e,t,v()(i,t))}))}}return e}var S=JSON.parse(sessionStorage.getItem("customed-oreo"))||{},C=function(e){sessionStorage.setItem("customed-oreo",L()(e))},_={clear:function(){sessionStorage.removeItem("customed-oreo")},getData:function(){return S},setSelectedDesign:function(e){return S=E({},S,{design:e}),C(S),S},setSelectedColor:function(e){return S=E({},S,{colors:e}),C(S),S},setMesssage:function(e){return S=E({},S,{message:e}),C(S),S},resetSelectedItems:function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=I()(e);!(t=(r=s.next()).done);t=!0){var o=r.value;delete S[o]}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}return C(S),S}};t.a=_},83:function(e,t,n){},84:function(e,t,n){e.exports=n(85)},85:function(e,t,n){"use strict";n.r(t);var i=n(12),r=n.n(i),s=n(13),o=n.n(s),c=n(2),a=n.n(c),l=n(0),u=n.n(l),d=n(3),v=n.n(d),f=n(8),g=n.n(f),h=n(4),b=n.n(h),m=n(14),x=n.n(m),p=n(22),I=n.n(p),y=n(24),w=n.n(y),A=n(51),L=n.n(A),k=n(33),E=n.n(k),S=n(52),C=n.n(S),_=n(53),R=n.n(_),D=n(82),M=n.n(D),T=n(15),H=n.n(T),q=n(38),O=n.n(q),j=n(18),B=n.n(j);function J(e,t){var n=x()(e);if(b.a){var i=b()(e);t&&(i=g()(i).call(i,(function(t){return v()(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)u()(n=J(Object(i),!0)).call(n,(function(t){H()(e,t,i[t])}));else if(a.a)o()(e,a()(i));else{var s;u()(s=J(Object(i))).call(s,(function(t){r()(e,t,v()(i,t))}))}}return e}var z,F,G,K,P,Q,U,V=(z={},F={current:"current"},G=function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=-1,s=2,o=!1;++r<t.length;)o=2==(n=(n=1*(t[r].style.order||s+r)-e)<1?t.length+n:n>t.length?n-t.length:n),t[r].style.order=n,t[r].setAttribute("aria-hidden",B()(2!=n)),t[r].setAttribute("tabindex",o?"0":"-1"),t[r].setAttribute("role","tabpanel"),i[r]&&(i[r].setAttribute("aria-selected",o?"true":"false"),i[r].setAttribute("tabindex",o?"0":"-1"))},K=function(e,t){t>0?e.classList.remove("is-revers"):e.classList.add("is-revers"),e.classList.remove("is-set"),O()((function(){e.classList.add("is-set")}),50)},P=function(e,t,n){var i,r={detail:N({},n),bubbles:!0,cancelable:!0};"function"==typeof window.CustomEvent?i=new CustomEvent(t,r):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r.detail),e.dispatchEvent(i)},Q=function(e,t){return M()(t)?t[e]:t instanceof HTMLElement?t.getAttribute("data-title"):""},U=function(e){var t=e.keyCode||e.which,n=this.config.get(z),i=n.indicators,r=n.liveRegion;switch(r.setAttribute("aria-live","off"),t){case 37:case 38:this.prev(),i[this.getCurrIdx()].focus();break;case 39:case 40:this.next(),i[this.getCurrIdx()].focus()}O()((function(){r.setAttribute("aria-live","polite")}),10)},function(){function e(t){if(C()(this,e),!t.root||!t.slide)throw new Error("'root' or 'slide' is not defined");var n=N({liveRegion:null,liveDictionary:null,indicatorRoot:null,indicators:[]},t);this.config=new E.a,this.currentIdx=new E.a([[F,0]]),this.config.set(z,n),this.init()}return R()(e,[{key:"init",value:function(){var e,t,n=this,i=this.config.get(z),r=i.root,s=i.slide,o=i.slideItems,c=i.prevBtn,a=i.nextBtn,l=i.liveRegion,u=i.liveDictionary,d=i.indicatorRoot,v=i.indicators;if(s.classList.add("is-set"),null==l){var f=document.createElement("div"),g=Q(0,u||o[0]);f.setAttribute("class","sr-only"),g&&(f.innerHTML=g),f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true"),f.setAttribute("aria-relevant","text"),r.appendChild(f),this.config.set(z,N({},this.config.get(z),{liveRegion:f}))}else{var h=Q(0,u||o[0]);h&&(l.innerHTML=h),l.setAttribute("aria-live","polite"),l.setAttribute("aria-atomic","true"),l.setAttribute("aria-relevant","text")}if(d){d.setAttribute("role","tablist");for(var b,m=-1;b=v[++m];)b.setAttribute("role","tab"),b.addEventListener("click",(function(e){var t,i=e.currentTarget,r=L()(t=w()(v)).call(t,i);n.go(r)}),!1);d.addEventListener("keydown",I()(U).call(U,this),!1)}G(0,o,v),a.addEventListener("click",I()(e=this.next).call(e,this),!1),c.addEventListener("click",I()(t=this.prev).call(t,this),!1),P(s,"init",{currentIdx:this.currentIdx.get(F)})}},{key:"next",value:function(){var e=this.config.get(z),t=e.slide,n=e.slideItems,i=e.indicators,r=e.liveRegion,s=e.liveDictionary,o=this.currentIdx.get(F)+1;o=o>n.length-1?0:o,this.currentIdx.set(F,o),G(1,n,i),K(t,1);var c=Q(o,s||n[o]);c&&(r.innerHTML=c),P(t,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"prev",value:function(){var e=this.config.get(z),t=e.slide,n=e.slideItems,i=e.indicators,r=e.liveRegion,s=e.liveDictionary,o=this.currentIdx.get(F)-1;o=o<0?n.length-1:o,this.currentIdx.set(F,o),G(-1,n,i),K(t,-1);var c=Q(o,s||n[o]);c&&(r.innerHTML=c),P(t,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"go",value:function(e){var t=this.config.get(z),n=t.slide,i=t.slideItems,r=t.indicators,s=t.liveRegion,o=t.liveDictionary,c=e-this.currentIdx.get(F),a=Q(e,o||i[e]);this.currentIdx.set(F,e),G(c,i,r),K(n,c),a&&(s.innerHTML=a),P(n,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"getCurrIdx",value:function(){return this.currentIdx.get(F)}}]),e}());t.default=V}},[[183,1,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL0Nhcm91c2VsL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL1N0b3JlL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL0Nhcm91c2VsL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9DYXJvdXNlbC9zcmMvQ2Fyb3VzZWwuanMiXSwibmFtZXMiOlsiQ2Fyb3VzZWwiLCJyb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGUiLCJzbGlkZUl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsInByZXZCdG4iLCJuZXh0QnRuIiwic3RvcmUiLCJjbGVhciIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsInVwZGF0ZVN0b3JlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXREYXRhIiwic2V0U2VsZWN0ZWREZXNpZ24iLCJkZXNpZ24iLCJzZXRTZWxlY3RlZENvbG9yIiwiY29sb3JzIiwic2V0TWVzc3NhZ2UiLCJtZXNzYWdlIiwicmVzZXRTZWxlY3RlZEl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwic2V0dGluZ3MiLCJjdXJyZW50IiwicmVPcmRlcmluZyIsImFwcGx5QW5pbWF0ZSIsImVtaXRFdmVudCIsImdldEFubm91bmNlQ29udGVudCIsImluZGljYXRvckhhbmRsZXJLZXlFdnQiLCJhbW91bnQiLCJzbGlkZXMiLCJvcmRlciIsImluZGljYXRvcnMiLCJpIiwiYmFzZSIsImlzU2VsZWN0ZWQiLCJsZW5ndGgiLCJzdHlsZSIsInNldEF0dHJpYnV0ZSIsImRpcmVjdGlvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImVsIiwiZXZlbnQiLCJkZXRhaWwiLCJjdXN0b21FdmVudCIsInBhcmFtcyIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwid2luZG93IiwiQ3VzdG9tRXZlbnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImRpc3BhdGNoRXZlbnQiLCJpZHgiLCJyZWZlcmVuY2UiLCJIVE1MRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImtleWNvZGUiLCJrZXlDb2RlIiwid2hpY2giLCJ0aGlzIiwiY29uZmlnIiwiZ2V0IiwibGl2ZVJlZ2lvbiIsInByZXYiLCJnZXRDdXJySWR4IiwiZm9jdXMiLCJuZXh0Iiwib3B0aW9ucyIsIkVycm9yIiwibGl2ZURpY3Rpb25hcnkiLCJpbmRpY2F0b3JSb290IiwiY3VycmVudElkeCIsInNldCIsImluaXQiLCJuZXdMaXZlUmVnaW9uIiwiY3JlYXRlRWxlbWVudCIsImFubm91bmNlQ29udGVudCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiaW5kaWNhdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImN1cnJlbnRUYXJnZXQiLCJnbyIsImN1cnJJZHgiXSwibWFwcGluZ3MiOiIwRkFBQSw0REFPQSxJQUFJQSxJQUFTLENBQ1hDLEtBQU1DLFNBQVNDLGNBQVQsbUJBQ05DLE1BQU9GLFNBQVNDLGNBQVQsV0FDUEUsV0FBWUgsU0FBU0ksaUJBQVQsaUJBQ1pDLFFBQVNMLFNBQVNDLGNBQVQsMkJBQ1RLLFFBQVNOLFNBQVNDLGNBQVQsNkJBR1hNLElBQU1DLFMseUNDZk5DLEVBQU9DLFFBQVVDLEVBQVEsSyxrbkJDQXpCLElBQUlDLEVBQU9DLEtBQUtDLE1BQU1DLGVBQWVDLFFBQWYsbUJBQTRDLEdBRTVEQyxFQUFjLFNBQUFMLEdBQ2xCRyxlQUFlRyxRQUFmLGdCQUF3QyxJQUFlTixLQUduREwsRUFBUSxDQUNaQyxNQURZLFdBRVZPLGVBQWVJLFdBQWYsa0JBRUZDLFFBSlksV0FLVixPQUFPUixHQUVUUyxrQkFQWSxTQU9NQyxHQUdoQixPQUZBVixFQUFPLEVBQUgsR0FBT0EsRUFBUCxDQUFhVSxXQUNqQkwsRUFBWUwsR0FDTEEsR0FFVFcs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QUtIQSxXQUNBTyxFQU5HLEVBTUhBLGVBRUVjLEVBQVV4QixLQUFLWSxXQUFXVixJQUFJekMsR0FBVyxFQUM3QytELEVBQVVBLEVBQVUsRUFBSTNGLEVBQVd5QyxPQUFTLEVBQUlrRCxFQUNoRHhCLEtBQUtZLFdBQVdDLElBQUlwRCxFQUFTK0QsR0FDN0I5RCxHQUFZLEVBQUc3QixFQUFZcUMsR0FDM0JQLEVBQWEvQixHQUFRLEdBRXJCLElBQU1xRixFQUFrQnBELEVBQW1CMkQsRUFBU2QsR0FBa0I3RSxFQUFXMkYsSUFDOUVQLElBQWlCZCxFQUFXZSxVQUFZRCxHQUUzQ3JELEVBQVVoQyxFQUFELFVBQW1CLENBQUNnRixXQUFZWixLQUFLWSxXQUFXVixJQUFJekMsT0EvTDNDLHlCQWtNakJnQyxHQUFLLE1BT0ZPLEtBQUtDLE9BQU9DLElBQUkxQyxHQUxsQjVCLEVBRkksRUFFSkEsTUFDQUMsRUFISSxFQUdKQSxXQUNBcUMsRUFKSSxFQUlKQSxXQUNBaUMsRUFMSSxFQUtKQSxXQUNBTyxFQU5JLEVBTUpBLGVBR0kzQyxFQUFTMEIsRUFESU8sS0FBS1ksV0FBV1YsSUFBSXpDLEdBRWpDd0QsRUFBa0JwRCxFQUFtQjRCLEVBQUtpQixHQUFrQjdFLEVBQVc0RCxJQUM3RU8sS0FBS1ksV0FBV0MsSUFBSXBELEVBQVNnQyxHQUM3Qi9CLEVBQVdLLEVBQVFsQyxFQUFZcUMsR0FDL0JQLEVBQWEvQixFQUFPbUMsR0FDakJrRCxJQUFpQmQsRUFBV2UsVUFBWUQsR0FDM0NyRCxFQUFVaEMsRUFBRCxVQUFtQixDQUFDZ0YsV0FBWVosS0FBS1ksV0FBV1YsSUFBSXpDLE9Bak4zQyxtQ0FxTmxCLE9BQU91QyxLQUFLWSxXQUFXVixJQUFJekMsT0FyTlQsTUE0TlRqQyxjIiwiZmlsZSI6InNjcmlwdC9tYWluLjExMWExNzFiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vc2Nzcy9pbmRleC5zY3NzXCI7XG5pbXBvcnQgXCIuL0Nhcm91c2VsL2Fzc2V0cy9pbmRleC5zY3NzXCI7XG5pbXBvcnQgXCJNb2R1bGVzL0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlL3Njc3MvZm9udGF3ZXNvbWUuc2Nzc1wiO1xuaW1wb3J0IFwiTW9kdWxlcy9AZm9ydGF3ZXNvbWUvZm9udGF3ZXNvbWUtZnJlZS9zY3NzL3NvbGlkLnNjc3NcIjtcbmltcG9ydCBDYXJvdXNlbCBmcm9tICcuL0Nhcm91c2VsJztcbmltcG9ydCBzdG9yZSBmcm9tICcuL1N0b3JlJztcblxubmV3IENhcm91c2VsKHtcbiAgcm9vdDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm9yZW8taW50cm9kdWNlYCksXG4gIHNsaWRlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2xpZGVzYCksXG4gIHNsaWRlSXRlbXM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5zbGlkZXNfX2l0ZW1gKSxcbiAgcHJldkJ0bjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNsaWRlc19fY29udHJvbHNfX3ByZXZgKSxcbiAgbmV4dEJ0bjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNsaWRlc19fY29udHJvbHNfX25leHRgKSxcbn0pO1xuXG5zdG9yZS5jbGVhcigpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShgLi9zcmNgKTsiLCJsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgY3VzdG9tZWQtb3Jlb2ApKSB8fCB7fTtcblxuY29uc3QgdXBkYXRlU3RvcmUgPSBkYXRhID0+IHtcbiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgY3VzdG9tZWQtb3Jlb2AsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cblxuY29uc3Qgc3RvcmUgPSB7XG4gIGNsZWFyKCkge1xuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYGN1c3RvbWVkLW9yZW9gKTtcbiAgfSxcbiAgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcbiAgc2V0U2VsZWN0ZWREZXNpZ24oZGVzaWduKSB7XG4gICAgZGF0YSA9IHsuLi5kYXRhLCBkZXNpZ259O1xuICAgIHVwZGF0ZVN0b3JlKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9LFxuICBzZXRTZWxlY3RlZENvbG9yKGNvbG9ycykge1xuICAgIGRhdGEgPSB7Li4uZGF0YSwgY29sb3JzfTtcbiAgICB1cGRhdGVTdG9yZShkYXRhKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcbiAgc2V0TWVzc3NhZ2UobWVzc2FnZSkge1xuICAgIGRhdGEgPSB7Li4uZGF0YSwgbWVzc2FnZX07XG4gICAgdXBkYXRlU3RvcmUoZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sXG4gIHJlc2V0U2VsZWN0ZWRJdGVtcyhpdGVtcykge1xuICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcykge1xuICAgICAgZGVsZXRlIGRhdGFbaXRlbV07XG4gICAgfVxuICAgIHVwZGF0ZVN0b3JlKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0b3JlOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9DYXJvdXNlbCcpOyIsImNvbnN0IENhcm91c2VsID0gKCgpID0+IHtcbiAgbGV0IHNldHRpbmdzID0ge307XG4gIGxldCBjdXJyZW50ID0ge2N1cnJlbnQ6IGBjdXJyZW50YH07XG5cbiAgY29uc3QgcmVPcmRlcmluZyA9IChhbW91bnQsIHNsaWRlcywgaW5kaWNhdG9ycyA9IFtdICkgPT4ge1xuICAgIGZvcihsZXQgaSA9IC0xLCBiYXNlID0gMiwgaXNTZWxlY3RlZCA9IGZhbHNlLCBvcmRlcjsgKytpIDwgc2xpZGVzLmxlbmd0aDspIHtcbiAgICAgIG9yZGVyID0gKHNsaWRlc1tpXS5zdHlsZS5vcmRlciB8fCAoYmFzZSArIGkpKSAqIDEgLSBhbW91bnQ7XG4gICAgICBvcmRlciA9IG9yZGVyIDwgMSA/IHNsaWRlcy5sZW5ndGggKyBvcmRlciA6IG9yZGVyID4gc2xpZGVzLmxlbmd0aCA/IG9yZGVyIC0gc2xpZGVzLmxlbmd0aCA6IG9yZGVyO1xuICAgICAgaXNTZWxlY3RlZCA9IG9yZGVyID09IDI7XG4gICAgICBzbGlkZXNbaV0uc3R5bGUub3JkZXIgPSBvcmRlcjtcbiAgICAgIHNsaWRlc1tpXS5zZXRBdHRyaWJ1dGUoYGFyaWEtaGlkZGVuYCwgSlNPTi5zdHJpbmdpZnkob3JkZXIgIT0gMikpO1xuICAgICAgc2xpZGVzW2ldLnNldEF0dHJpYnV0ZShgdGFiaW5kZXhgLCBpc1NlbGVjdGVkID8gYDBgIDogYC0xYCk7XG4gICAgICBzbGlkZXNbaV0uc2V0QXR0cmlidXRlKGByb2xlYCwgYHRhYnBhbmVsYCk7XG4gICAgICBpZihpbmRpY2F0b3JzW2ldKXtcbiAgICAgICAgaW5kaWNhdG9yc1tpXS5zZXRBdHRyaWJ1dGUoYGFyaWEtc2VsZWN0ZWRgLCBpc1NlbGVjdGVkID8gYHRydWVgIDogYGZhbHNlYCk7XG4gICAgICAgIGluZGljYXRvcnNbaV0uc2V0QXR0cmlidXRlKGB0YWJpbmRleGAsIGlzU2VsZWN0ZWQgPyBgMGAgOiBgLTFgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXBwbHlBbmltYXRlID0gKHNsaWRlLCBkaXJlY3Rpb24pID0+IHtcbiAgICBpZihkaXJlY3Rpb24gPiAwKSBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKGBpcy1yZXZlcnNgKTtcbiAgICBlbHNlIHNsaWRlLmNsYXNzTGlzdC5hZGQoYGlzLXJldmVyc2ApO1xuICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoYGlzLXNldGApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChgaXMtc2V0YCk7XG4gICAgfSwgNTApO1xuICB9XG5cbiAgY29uc3QgZW1pdEV2ZW50ID0gKGVsLCBldmVudCwgZGV0YWlsKSA9PiB7XG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5kZXRhaWxcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICB9XG5cbiAgICBlbC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbiAgfVxuXG4gIGNvbnN0IGdldEFubm91bmNlQ29udGVudCA9IChpZHgsIHJlZmVyZW5jZSkgPT4ge1xuICAgIGlmKEFycmF5LmlzQXJyYXkocmVmZXJlbmNlKSlcbiAgICAgIHJldHVybiByZWZlcmVuY2VbaWR4XTtcbiAgICBlbHNlIGlmKHJlZmVyZW5jZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuICAgICAgcmV0dXJuIHJlZmVyZW5jZS5nZXRBdHRyaWJ1dGUoYGRhdGEtdGl0bGVgKVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIGNvbnN0IGluZGljYXRvckhhbmRsZXJLZXlFdnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXljb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcbiAgICBjb25zdCB7aW5kaWNhdG9ycywgbGl2ZVJlZ2lvbn0gPSB0aGlzLmNvbmZpZy5nZXQoc2V0dGluZ3MpO1xuICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWxpdmVgLCBgb2ZmYCk7XG4gICAgc3dpdGNoKGtleWNvZGUpIHtcbiAgICAgIGNhc2UgMzc6XG4gICAgICBjYXNlIDM4OlxuICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgICAgaW5kaWNhdG9yc1t0aGlzLmdldEN1cnJJZHgoKV0uZm9jdXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM5OlxuICAgICAgY2FzZSA0MDpcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGluZGljYXRvcnNbdGhpcy5nZXRDdXJySWR4KCldLmZvY3VzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICBsaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1saXZlYCwgYHBvbGl0ZWApXG4gICAgfSwgMTApO1xuICB9O1xuXG4gIGNsYXNzIENhcm91c2VsIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICBpZighIG9wdGlvbnMucm9vdCB8fCAhb3B0aW9ucy5zbGlkZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAncm9vdCcgb3IgJ3NsaWRlJyBpcyBub3QgZGVmaW5lZGApO1xuXG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIGxpdmVSZWdpb246IG51bGwsXG4gICAgICAgIGxpdmVEaWN0aW9uYXJ5OiBudWxsLFxuICAgICAgICBpbmRpY2F0b3JSb290OiBudWxsLFxuICAgICAgICBpbmRpY2F0b3JzOiBbXSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuY29uZmlnID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgIHRoaXMuY3VycmVudElkeCA9IG5ldyBXZWFrTWFwKFtbY3VycmVudCwgMF1dKTtcbiAgICAgIHRoaXMuY29uZmlnLnNldChzZXR0aW5ncywgY29uZmlnKTtcblxuICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcm9vdCxcbiAgICAgICAgc2xpZGUsXG4gICAgICAgIHNsaWRlSXRlbXMsXG4gICAgICAgIHByZXZCdG4sXG4gICAgICAgIG5leHRCdG4sXG4gICAgICAgIGxpdmVSZWdpb24sXG4gICAgICAgIGxpdmVEaWN0aW9uYXJ5LFxuICAgICAgICBpbmRpY2F0b3JSb290LFxuICAgICAgICBpbmRpY2F0b3JzLFxuICAgICAgfSA9IHRoaXMuY29uZmlnLmdldChzZXR0aW5ncyk7XG4gICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKGBpcy1zZXRgKTtcblxuICAgICAgaWYobGl2ZVJlZ2lvbiA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpdmVSZWdpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcbiAgICAgICAgY29uc3QgYW5ub3VuY2VDb250ZW50ID0gZ2V0QW5ub3VuY2VDb250ZW50KDAsIGxpdmVEaWN0aW9uYXJ5IHx8IHNsaWRlSXRlbXNbMF0pO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgY2xhc3NgLCBgc3Itb25seWApO1xuICAgICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIG5ld0xpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1saXZlYCwgYHBvbGl0ZWApO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1hdG9taWNgLCBgdHJ1ZWApO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1yZWxldmFudGAsIGB0ZXh0YCk7XG4gICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQobmV3TGl2ZVJlZ2lvbik7XG5cbiAgICAgICAgdGhpcy5jb25maWcuc2V0KHNldHRpbmdzLCB7XG4gICAgICAgICAgLi4udGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKSxcbiAgICAgICAgICBsaXZlUmVnaW9uOiBuZXdMaXZlUmVnaW9uXG4gICAgICAgIH0pO1xuICAgICAgfWVsc2Uge1xuICAgICAgICBjb25zdCBhbm5vdW5jZUNvbnRlbnQgPSBnZXRBbm5vdW5jZUNvbnRlbnQoMCwgbGl2ZURpY3Rpb25hcnkgfHwgc2xpZGVJdGVtc1swXSk7XG4gICAgICAgIGlmKGFubm91bmNlQ29udGVudCkgbGl2ZVJlZ2lvbi5pbm5lckhUTUwgPSBhbm5vdW5jZUNvbnRlbnQ7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWxpdmVgLCBgcG9saXRlYCk7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWF0b21pY2AsIGB0cnVlYCk7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLXJlbGV2YW50YCwgYHRleHRgKTtcbiAgICAgIH1cblxuICAgICAgaWYoaW5kaWNhdG9yUm9vdCkge1xuICAgICAgICBpbmRpY2F0b3JSb290LnNldEF0dHJpYnV0ZShgcm9sZWAsIGB0YWJsaXN0YCk7XG4gICAgICAgIGZvcihsZXQgaSA9IC0xLCBpbmRpY2F0b3I7IGluZGljYXRvciA9IGluZGljYXRvcnNbKytpXTspIHtcbiAgICAgICAgICBpbmRpY2F0b3Iuc2V0QXR0cmlidXRlKGByb2xlYCwgYHRhYmApO1xuICAgICAgICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICh7Y3VycmVudFRhcmdldH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IEFycmF5LmZyb20oaW5kaWNhdG9ycykuaW5kZXhPZihjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuZ28oaWR4KTtcbiAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5kaWNhdG9yUm9vdC5hZGRFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgaW5kaWNhdG9ySGFuZGxlcktleUV2dC5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJlT3JkZXJpbmcoMCwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG5cbiAgICAgIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm5leHQuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgICAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucHJldi5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICBlbWl0RXZlbnQoc2xpZGUsIGBpbml0YCwge2N1cnJlbnRJZHg6IHRoaXMuY3VycmVudElkeC5nZXQoY3VycmVudCl9KTtcbiAgICB9XG5cbiAgICBuZXh0KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGxldCBjdXJySWR4ID0gdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KSArIDE7XG4gICAgICBjdXJySWR4ID0gY3VycklkeCA+IHNsaWRlSXRlbXMubGVuZ3RoIC0gMSA/IDAgOiBjdXJySWR4O1xuICAgICAgdGhpcy5jdXJyZW50SWR4LnNldChjdXJyZW50LCBjdXJySWR4KTtcbiAgICAgIHJlT3JkZXJpbmcoMSwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG4gICAgICBhcHBseUFuaW1hdGUoc2xpZGUsIDEpO1xuXG4gICAgICBjb25zdCBhbm5vdW5jZUNvbnRlbnQgPSBnZXRBbm5vdW5jZUNvbnRlbnQoY3VycklkeCwgbGl2ZURpY3Rpb25hcnkgfHwgc2xpZGVJdGVtc1tjdXJySWR4XSk7XG4gICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIGxpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuXG4gICAgICBlbWl0RXZlbnQoc2xpZGUsIGBjaGFuZ2VkYCwge2N1cnJlbnRJZHg6IHRoaXMuY3VycmVudElkeC5nZXQoY3VycmVudCl9KTtcbiAgICB9XG5cbiAgICBwcmV2KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGxldCBjdXJySWR4ID0gdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KSAtIDE7XG4gICAgICBjdXJySWR4ID0gY3VycklkeCA8IDAgPyBzbGlkZUl0ZW1zLmxlbmd0aCAtIDEgOiBjdXJySWR4O1xuICAgICAgdGhpcy5jdXJyZW50SWR4LnNldChjdXJyZW50LCBjdXJySWR4KTtcbiAgICAgIHJlT3JkZXJpbmcoLTEsIHNsaWRlSXRlbXMsIGluZGljYXRvcnMpO1xuICAgICAgYXBwbHlBbmltYXRlKHNsaWRlLCAtMSk7XG5cbiAgICAgIGNvbnN0IGFubm91bmNlQ29udGVudCA9IGdldEFubm91bmNlQ29udGVudChjdXJySWR4LCBsaXZlRGljdGlvbmFyeSB8fCBzbGlkZUl0ZW1zW2N1cnJJZHhdKTtcbiAgICAgIGlmKGFubm91bmNlQ29udGVudCkgbGl2ZVJlZ2lvbi5pbm5lckhUTUwgPSBhbm5vdW5jZUNvbnRlbnQ7XG5cbiAgICAgIGVtaXRFdmVudChzbGlkZSwgYGNoYW5nZWRgLCB7Y3VycmVudElkeDogdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KX0pO1xuICAgIH1cblxuICAgIGdvKGlkeCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRJZHggPSB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpO1xuICAgICAgY29uc3QgYW1vdW50ID0gaWR4IC0gY3VycmVudElkeDtcbiAgICAgIGNvbnN0IGFubm91bmNlQ29udGVudCA9IGdldEFubm91bmNlQ29udGVudChpZHgsIGxpdmVEaWN0aW9uYXJ5IHx8IHNsaWRlSXRlbXNbaWR4XSk7XG4gICAgICB0aGlzLmN1cnJlbnRJZHguc2V0KGN1cnJlbnQsIGlkeCk7XG4gICAgICByZU9yZGVyaW5nKGFtb3VudCwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG4gICAgICBhcHBseUFuaW1hdGUoc2xpZGUsIGFtb3VudCk7XG4gICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIGxpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuICAgICAgZW1pdEV2ZW50KHNsaWRlLCBgY2hhbmdlZGAsIHtjdXJyZW50SWR4OiB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpfSk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycklkeCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDYXJvdXNlbDtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IENhcm91c2VsOyJdLCJzb3VyY2VSb290IjoiIn0=