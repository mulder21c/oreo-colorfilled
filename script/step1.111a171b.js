(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{253:function(e,t,n){"use strict";n.r(t);n(254),n(83),n(54),n(55);var i=n(67),r=n.n(i),s=n(7);s.a.resetSelectedItems(["design"]);var o=document.querySelector(".select-design"),c=document.querySelector(".next-step"),a=new r.a({root:o,slide:document.querySelector(".slides"),slideItems:document.querySelectorAll(".slides__item"),prevBtn:document.querySelector(".slides__controls__prev"),nextBtn:document.querySelector(".slides__controls__next"),liveRegion:document.querySelector(".slides__indicator__desc"),liveDictionary:["oreo world 디자인은 오레오의 다양한 7가지 맛을 표현한 디자인입니다.","oreo cooking 디자인은 오레오를 다양한 디저트로 표현한 디자인입니다.",'디자이너가 미리 색을 지정해 놓은 <span class="sr-only">따듯한 느낌을 주는 노란색 계열의</span> 프리셋 디자인입니다.','디자이너가 미리 색을 지정해 놓은 <span class="sr-only">꽃을 연상 시키는 옅은 핑크색 계열의</span> 프리셋 디자인입니다.','디자이너가 미리 색을 지정해 놓은 <span class="sr-only">청량감 가득한 파란색 계열의</span> 프리셋 디자인입니다.'],indicatorRoot:document.querySelector(".slides__indicator"),indicators:document.querySelectorAll(".slides__indicator__item")});c.addEventListener("click",(function(e){var t=a.getCurrIdx();s.a.setSelectedDesign(t),t>1&&(e.preventDefault(),s.a.setSelectedColor(null),location.href="step3.html")}),!1)},254:function(e,t,n){},67:function(e,t,n){e.exports=n(84)},7:function(e,t,n){"use strict";var i=n(12),r=n.n(i),s=n(13),o=n.n(s),c=n(2),a=n.n(c),l=n(0),u=n.n(l),d=n(3),v=n.n(d),f=n(8),g=n.n(f),h=n(4),m=n.n(h),p=n(14),b=n.n(p),y=n(19),x=n.n(y),I=n(15),_=n.n(I),w=n(18),A=n.n(w);function S(e,t){var n=b()(e);if(m.a){var i=m()(e);t&&(i=g()(i).call(i,(function(t){return v()(e,t).enumerable}))),n.push.apply(n,i)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)u()(n=S(Object(i),!0)).call(n,(function(t){_()(e,t,i[t])}));else if(a.a)o()(e,a()(i));else{var s;u()(s=S(Object(i))).call(s,(function(t){r()(e,t,v()(i,t))}))}}return e}var k=JSON.parse(sessionStorage.getItem("customed-oreo"))||{},E=function(e){sessionStorage.setItem("customed-oreo",A()(e))},C={clear:function(){sessionStorage.removeItem("customed-oreo")},getData:function(){return k},setSelectedDesign:function(e){return k=L({},k,{design:e}),E(k),k},setSelectedColor:function(e){return k=L({},k,{colors:e}),E(k),k},setMesssage:function(e){return k=L({},k,{message:e}),E(k),k},resetSelectedItems:function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=x()(e);!(t=(r=s.next()).done);t=!0){var o=r.value;delete k[o]}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}return E(k),k}};t.a=C},83:function(e,t,n){},84:function(e,t,n){e.exports=n(85)},85:function(e,t,n){"use strict";n.r(t);var i=n(12),r=n.n(i),s=n(13),o=n.n(s),c=n(2),a=n.n(c),l=n(0),u=n.n(l),d=n(3),v=n.n(d),f=n(8),g=n.n(f),h=n(4),m=n.n(h),p=n(14),b=n.n(p),y=n(22),x=n.n(y),I=n(24),_=n.n(I),w=n(51),A=n.n(w),S=n(33),L=n.n(S),k=n(52),E=n.n(k),C=n(53),R=n.n(C),D=n(82),q=n.n(D),M=n(15),T=n.n(M),H=n(38),O=n.n(H),j=n(18),B=n.n(j);function J(e,t){var n=b()(e);if(m.a){var i=m()(e);t&&(i=g()(i).call(i,(function(t){return v()(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)u()(n=J(Object(i),!0)).call(n,(function(t){T()(e,t,i[t])}));else if(a.a)o()(e,a()(i));else{var s;u()(s=J(Object(i))).call(s,(function(t){r()(e,t,v()(i,t))}))}}return e}var z,F,G,K,P,Q,U,V=(z={},F={current:"current"},G=function(e,t){for(var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=-1,s=2,o=!1;++r<t.length;)o=2==(n=(n=1*(t[r].style.order||s+r)-e)<1?t.length+n:n>t.length?n-t.length:n),t[r].style.order=n,t[r].setAttribute("aria-hidden",B()(2!=n)),t[r].setAttribute("tabindex",o?"0":"-1"),t[r].setAttribute("role","tabpanel"),i[r]&&(i[r].setAttribute("aria-selected",o?"true":"false"),i[r].setAttribute("tabindex",o?"0":"-1"))},K=function(e,t){t>0?e.classList.remove("is-revers"):e.classList.add("is-revers"),e.classList.remove("is-set"),O()((function(){e.classList.add("is-set")}),50)},P=function(e,t,n){var i,r={detail:N({},n),bubbles:!0,cancelable:!0};"function"==typeof window.CustomEvent?i=new CustomEvent(t,r):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r.detail),e.dispatchEvent(i)},Q=function(e,t){return q()(t)?t[e]:t instanceof HTMLElement?t.getAttribute("data-title"):""},U=function(e){var t=e.keyCode||e.which,n=this.config.get(z),i=n.indicators,r=n.liveRegion;switch(r.setAttribute("aria-live","off"),t){case 37:case 38:this.prev(),i[this.getCurrIdx()].focus();break;case 39:case 40:this.next(),i[this.getCurrIdx()].focus()}O()((function(){r.setAttribute("aria-live","polite")}),10)},function(){function e(t){if(E()(this,e),!t.root||!t.slide)throw new Error("'root' or 'slide' is not defined");var n=N({liveRegion:null,liveDictionary:null,indicatorRoot:null,indicators:[]},t);this.config=new L.a,this.currentIdx=new L.a([[F,0]]),this.config.set(z,n),this.init()}return R()(e,[{key:"init",value:function(){var e,t,n=this,i=this.config.get(z),r=i.root,s=i.slide,o=i.slideItems,c=i.prevBtn,a=i.nextBtn,l=i.liveRegion,u=i.liveDictionary,d=i.indicatorRoot,v=i.indicators;if(s.classList.add("is-set"),null==l){var f=document.createElement("div"),g=Q(0,u||o[0]);f.setAttribute("class","sr-only"),g&&(f.innerHTML=g),f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true"),f.setAttribute("aria-relevant","text"),r.appendChild(f),this.config.set(z,N({},this.config.get(z),{liveRegion:f}))}else{var h=Q(0,u||o[0]);h&&(l.innerHTML=h),l.setAttribute("aria-live","polite"),l.setAttribute("aria-atomic","true"),l.setAttribute("aria-relevant","text")}if(d){d.setAttribute("role","tablist");for(var m,p=-1;m=v[++p];)m.setAttribute("role","tab"),m.addEventListener("click",(function(e){var t,i=e.currentTarget,r=A()(t=_()(v)).call(t,i);n.go(r)}),!1);d.addEventListener("keydown",x()(U).call(U,this),!1)}G(0,o,v),a.addEventListener("click",x()(e=this.next).call(e,this),!1),c.addEventListener("click",x()(t=this.prev).call(t,this),!1),P(s,"init",{currentIdx:this.currentIdx.get(F)})}},{key:"next",value:function(){var e=this.config.get(z),t=e.slide,n=e.slideItems,i=e.indicators,r=e.liveRegion,s=e.liveDictionary,o=this.currentIdx.get(F)+1;o=o>n.length-1?0:o,this.currentIdx.set(F,o),G(1,n,i),K(t,1);var c=Q(o,s||n[o]);c&&(r.innerHTML=c),P(t,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"prev",value:function(){var e=this.config.get(z),t=e.slide,n=e.slideItems,i=e.indicators,r=e.liveRegion,s=e.liveDictionary,o=this.currentIdx.get(F)-1;o=o<0?n.length-1:o,this.currentIdx.set(F,o),G(-1,n,i),K(t,-1);var c=Q(o,s||n[o]);c&&(r.innerHTML=c),P(t,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"go",value:function(e){var t=this.config.get(z),n=t.slide,i=t.slideItems,r=t.indicators,s=t.liveRegion,o=t.liveDictionary,c=e-this.currentIdx.get(F),a=Q(e,o||i[e]);this.currentIdx.set(F,e),G(c,i,r),K(n,c),a&&(s.innerHTML=a),P(n,"changed",{currentIdx:this.currentIdx.get(F)})}},{key:"getCurrIdx",value:function(){return this.currentIdx.get(F)}}]),e}());t.default=V}},[[253,1,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9zdGVwMS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9DYXJvdXNlbC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9TdG9yZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9DYXJvdXNlbC9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvQ2Fyb3VzZWwvc3JjL0Nhcm91c2VsLmpzIl0sIm5hbWVzIjpbInN0b3JlIiwicmVzZXRTZWxlY3RlZEl0ZW1zIiwiY2Fyb3VzZWxSb290IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmV4dFN0ZXBCdG4iLCJjYXJvdXNlbCIsIkNhcm91c2VsIiwicm9vdCIsInNsaWRlIiwic2xpZGVJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcmV2QnRuIiwibmV4dEJ0biIsImxpdmVSZWdpb24iLCJsaXZlRGljdGlvbmFyeSIsImluZGljYXRvclJvb3QiLCJpbmRpY2F0b3JzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiY3VycklkeCIsImdldEN1cnJJZHgiLCJzZXRTZWxlY3RlZERlc2lnbiIsInByZXZlbnREZWZhdWx0Iiwic2V0U2VsZWN0ZWRDb2xvciIsImxvY2F0aW9uIiwiaHJlZiIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsInVwZGF0ZVN0b3JlIiwic2V0SXRlbSIsImNsZWFyIiwicmVtb3ZlSXRlbSIsImdldERhdGEiLCJkZXNpZ24iLCJjb2xvcnMiLCJzZXRNZXNzc2FnZSIsIm1lc3NhZ2UiLCJpdGVtcyIsIml0ZW0iLCJzZXR0aW5ncyIsImN1cnJlbnQiLCJyZU9yZGVyaW5nIiwiYXBwbHlBbmltYXRlIiwiZW1pdEV2ZW50IiwiZ2V0QW5ub3VuY2VDb250ZW50IiwiaW5kaWNhdG9ySGFuZGxlcktleUV2dCIsImFtb3VudCIsInNsaWRlcyIsIm9yZGVyIiwiaSIsImJhc2UiLCJpc1NlbGVjdGVkIiwibGVuZ3RoIiwic3R5bGUiLCJzZXRBdHRyaWJ1dGUiLCJkaXJlY3Rpb24iLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJlbCIsImRldGFpbCIsImN1c3RvbUV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImlkeCIsInJlZmVyZW5jZSIsIkhUTUxFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwia2V5Y29kZSIsImtleUNvZGUiLCJ3aGljaCIsInRoaXMiLCJjb25maWciLCJnZXQiLCJwcmV2IiwiZm9jdXMiLCJuZXh0Iiwib3B0aW9ucyIsIkVycm9yIiwiY3VycmVudElkeCIsInNldCIsImluaXQiLCJuZXdMaXZlUmVnaW9uIiwiY3JlYXRlRWxlbWVudCIsImFubm91bmNlQ29udGVudCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiaW5kaWNhdG9yIiwiY3VycmVudFRhcmdldCIsImdvIl0sIm1hcHBpbmdzIjoiMEZBQUEsNERBT0FBLElBQU1DLG1CQUFtQixDQUFDLFdBRTFCLElBT01DLEVBQWVDLFNBQVNDLGNBQVQsa0JBQ2ZDLEVBQWNGLFNBQVNDLGNBQVQsY0FFZEUsRUFBVyxJQUFJQyxJQUFTLENBQzVCQyxLQUFNTixFQUNOTyxNQUFPTixTQUFTQyxjQUFULFdBQ1BNLFdBQVlQLFNBQVNRLGlCQUFULGlCQUNaQyxRQUFTVCxTQUFTQyxjQUFULDJCQUNUUyxRQUFTVixTQUFTQyxjQUFULDJCQUNUVSxXQUFZWCxTQUFTQyxjQUFULDRCQUNaVyxlQWpCa0IsQ0FBQyw4Q0FBRCxpU0FrQmxCQyxjQUFlYixTQUFTQyxjQUFULHNCQUNmYSxXQUFZZCxTQUFTUSxpQkFBVCw4QkFHZE4sRUFBWWEsaUJBQVosU0FBc0MsU0FBQUMsR0FDcEMs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Q2tELEVBQWtCOUMsRUFBbUIwQixFQUFLOUQsR0FBa0JMLEVBQVdtRSxJQUM3RU8sS0FBS1EsV0FBV0MsSUFBSTlDLEVBQVM4QixHQUM3QjdCLEVBQVdLLEVBQVEzQyxFQUFZTyxHQUMvQmdDLEVBQWF4QyxFQUFPNEMsR0FDakI0QyxJQUFpQm5GLEVBQVdvRixVQUFZRCxHQUMzQy9DLEVBQVV6QyxFQUFELFVBQW1CLENBQUNtRixXQUFZUixLQUFLUSxXQUFXTixJQUFJdkMsT0FqTjNDLG1DQXFObEIsT0FBT3FDLEtBQUtRLFdBQVdOLElBQUl2QyxPQXJOVCxNQTROVHhDLGMiLCJmaWxlIjoic2NyaXB0L3N0ZXAxLjExMWExNzFiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vc2Nzcy9zdGVwMS5zY3NzXCI7XG5pbXBvcnQgXCIuL0Nhcm91c2VsL2Fzc2V0cy9pbmRleC5zY3NzXCI7XG5pbXBvcnQgXCJNb2R1bGVzL0Bmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlL3Njc3MvZm9udGF3ZXNvbWUuc2Nzc1wiO1xuaW1wb3J0IFwiTW9kdWxlcy9AZm9ydGF3ZXNvbWUvZm9udGF3ZXNvbWUtZnJlZS9zY3NzL3NvbGlkLnNjc3NcIjtcbmltcG9ydCBDYXJvdXNlbCBmcm9tICcuL0Nhcm91c2VsJztcbmltcG9ydCBzdG9yZSBmcm9tICcuL1N0b3JlJztcblxuc3RvcmUucmVzZXRTZWxlY3RlZEl0ZW1zKFtgZGVzaWduYF0pO1xuXG5jb25zdCBkZXNpZ25HdWlkZSA9IFtcbiAgYG9yZW8gd29ybGQg65SU7J6Q7J247J2AIOyYpOugiOyYpOydmCDri6TslpHtlZwgN+qwgOyngCDrp5vsnYQg7ZGc7ZiE7ZWcIOuUlOyekOyduOyeheuLiOuLpC5gLFxuICBgb3JlbyBjb29raW5nIOuUlOyekOyduOydgCDsmKTroIjsmKTrpbwg64uk7JaR7ZWcIOuUlOyggO2KuOuhnCDtkZztmITtlZwg65SU7J6Q7J247J6F64uI64ukLmAsXG4gIGDrlJTsnpDsnbTrhIjqsIAg66+466asIOyDieydhCDsp4DsoJXtlbQg64aT7J2AIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPuuUsOuTr+2VnCDripDrgozsnYQg7KO864qUIOuFuOuegOyDiSDqs4Tsl7TsnZg8L3NwYW4+IO2UhOumrOyFiyDrlJTsnpDsnbjsnoXri4jri6QuYCxcbiAgYOuUlOyekOydtOuEiOqwgCDrr7jrpqwg7IOJ7J2EIOyngOygle2VtCDrhpPsnYAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+6r2D7J2EIOyXsOyDgSDsi5ztgqTripQg7JiF7J2AIO2Vke2BrOyDiSDqs4Tsl7TsnZg8L3NwYW4+IO2UhOumrOyFiyDrlJTsnpDsnbjsnoXri4jri6QuYCxcbiAgYOuUlOyekOydtOuEiOqwgCDrr7jrpqwg7IOJ7J2EIOyngOygle2VtCDrhpPsnYAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+7LKt65+J6rCQIOqwgOuTne2VnCDtjIzrnoDsg4kg6rOE7Je07J2YPC9zcGFuPiDtlITrpqzshYsg65SU7J6Q7J247J6F64uI64ukLmAsXG5dO1xuY29uc3QgY2Fyb3VzZWxSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNlbGVjdC1kZXNpZ25gKTtcbmNvbnN0IG5leHRTdGVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLm5leHQtc3RlcGApO1xuXG5jb25zdCBjYXJvdXNlbCA9IG5ldyBDYXJvdXNlbCh7XG4gIHJvb3Q6IGNhcm91c2VsUm9vdCxcbiAgc2xpZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5zbGlkZXNgKSxcbiAgc2xpZGVJdGVtczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLnNsaWRlc19faXRlbWApLFxuICBwcmV2QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2xpZGVzX19jb250cm9sc19fcHJldmApLFxuICBuZXh0QnRuOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2xpZGVzX19jb250cm9sc19fbmV4dGApLFxuICBsaXZlUmVnaW9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2xpZGVzX19pbmRpY2F0b3JfX2Rlc2NgKSxcbiAgbGl2ZURpY3Rpb25hcnk6IGRlc2lnbkd1aWRlLFxuICBpbmRpY2F0b3JSb290OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc2xpZGVzX19pbmRpY2F0b3JgKSxcbiAgaW5kaWNhdG9yczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLnNsaWRlc19faW5kaWNhdG9yX19pdGVtYCksXG59KTtcblxubmV4dFN0ZXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCBldmVudCA9PiB7XG4gIGNvbnN0IGN1cnJJZHggPSBjYXJvdXNlbC5nZXRDdXJySWR4KCk7XG4gIHN0b3JlLnNldFNlbGVjdGVkRGVzaWduKGN1cnJJZHgpO1xuICBpZihjdXJySWR4ID4gMSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc3RvcmUuc2V0U2VsZWN0ZWRDb2xvcihudWxsKTtcbiAgICBsb2NhdGlvbi5ocmVmID0gYHN0ZXAzLmh0bWxgO1xuICB9O1xufSwgZmFsc2UpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShgLi9zcmNgKTsiLCJsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgY3VzdG9tZWQtb3Jlb2ApKSB8fCB7fTtcblxuY29uc3QgdXBkYXRlU3RvcmUgPSBkYXRhID0+IHtcbiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgY3VzdG9tZWQtb3Jlb2AsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cblxuY29uc3Qgc3RvcmUgPSB7XG4gIGNsZWFyKCkge1xuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYGN1c3RvbWVkLW9yZW9gKTtcbiAgfSxcbiAgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcbiAgc2V0U2VsZWN0ZWREZXNpZ24oZGVzaWduKSB7XG4gICAgZGF0YSA9IHsuLi5kYXRhLCBkZXNpZ259O1xuICAgIHVwZGF0ZVN0b3JlKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9LFxuICBzZXRTZWxlY3RlZENvbG9yKGNvbG9ycykge1xuICAgIGRhdGEgPSB7Li4uZGF0YSwgY29sb3JzfTtcbiAgICB1cGRhdGVTdG9yZShkYXRhKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfSxcbiAgc2V0TWVzc3NhZ2UobWVzc2FnZSkge1xuICAgIGRhdGEgPSB7Li4uZGF0YSwgbWVzc2FnZX07XG4gICAgdXBkYXRlU3RvcmUoZGF0YSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sXG4gIHJlc2V0U2VsZWN0ZWRJdGVtcyhpdGVtcykge1xuICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcykge1xuICAgICAgZGVsZXRlIGRhdGFbaXRlbV07XG4gICAgfVxuICAgIHVwZGF0ZVN0b3JlKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHN0b3JlOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9DYXJvdXNlbCcpOyIsImNvbnN0IENhcm91c2VsID0gKCgpID0+IHtcbiAgbGV0IHNldHRpbmdzID0ge307XG4gIGxldCBjdXJyZW50ID0ge2N1cnJlbnQ6IGBjdXJyZW50YH07XG5cbiAgY29uc3QgcmVPcmRlcmluZyA9IChhbW91bnQsIHNsaWRlcywgaW5kaWNhdG9ycyA9IFtdICkgPT4ge1xuICAgIGZvcihsZXQgaSA9IC0xLCBiYXNlID0gMiwgaXNTZWxlY3RlZCA9IGZhbHNlLCBvcmRlcjsgKytpIDwgc2xpZGVzLmxlbmd0aDspIHtcbiAgICAgIG9yZGVyID0gKHNsaWRlc1tpXS5zdHlsZS5vcmRlciB8fCAoYmFzZSArIGkpKSAqIDEgLSBhbW91bnQ7XG4gICAgICBvcmRlciA9IG9yZGVyIDwgMSA/IHNsaWRlcy5sZW5ndGggKyBvcmRlciA6IG9yZGVyID4gc2xpZGVzLmxlbmd0aCA/IG9yZGVyIC0gc2xpZGVzLmxlbmd0aCA6IG9yZGVyO1xuICAgICAgaXNTZWxlY3RlZCA9IG9yZGVyID09IDI7XG4gICAgICBzbGlkZXNbaV0uc3R5bGUub3JkZXIgPSBvcmRlcjtcbiAgICAgIHNsaWRlc1tpXS5zZXRBdHRyaWJ1dGUoYGFyaWEtaGlkZGVuYCwgSlNPTi5zdHJpbmdpZnkob3JkZXIgIT0gMikpO1xuICAgICAgc2xpZGVzW2ldLnNldEF0dHJpYnV0ZShgdGFiaW5kZXhgLCBpc1NlbGVjdGVkID8gYDBgIDogYC0xYCk7XG4gICAgICBzbGlkZXNbaV0uc2V0QXR0cmlidXRlKGByb2xlYCwgYHRhYnBhbmVsYCk7XG4gICAgICBpZihpbmRpY2F0b3JzW2ldKXtcbiAgICAgICAgaW5kaWNhdG9yc1tpXS5zZXRBdHRyaWJ1dGUoYGFyaWEtc2VsZWN0ZWRgLCBpc1NlbGVjdGVkID8gYHRydWVgIDogYGZhbHNlYCk7XG4gICAgICAgIGluZGljYXRvcnNbaV0uc2V0QXR0cmlidXRlKGB0YWJpbmRleGAsIGlzU2VsZWN0ZWQgPyBgMGAgOiBgLTFgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXBwbHlBbmltYXRlID0gKHNsaWRlLCBkaXJlY3Rpb24pID0+IHtcbiAgICBpZihkaXJlY3Rpb24gPiAwKSBzbGlkZS5jbGFzc0xpc3QucmVtb3ZlKGBpcy1yZXZlcnNgKTtcbiAgICBlbHNlIHNsaWRlLmNsYXNzTGlzdC5hZGQoYGlzLXJldmVyc2ApO1xuICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoYGlzLXNldGApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChgaXMtc2V0YCk7XG4gICAgfSwgNTApO1xuICB9XG5cbiAgY29uc3QgZW1pdEV2ZW50ID0gKGVsLCBldmVudCwgZGV0YWlsKSA9PiB7XG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGRldGFpbDoge1xuICAgICAgICAuLi5kZXRhaWxcbiAgICAgIH0sXG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgY3VzdG9tRXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCB0cnVlLCB0cnVlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICB9XG5cbiAgICBlbC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbiAgfVxuXG4gIGNvbnN0IGdldEFubm91bmNlQ29udGVudCA9IChpZHgsIHJlZmVyZW5jZSkgPT4ge1xuICAgIGlmKEFycmF5LmlzQXJyYXkocmVmZXJlbmNlKSlcbiAgICAgIHJldHVybiByZWZlcmVuY2VbaWR4XTtcbiAgICBlbHNlIGlmKHJlZmVyZW5jZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuICAgICAgcmV0dXJuIHJlZmVyZW5jZS5nZXRBdHRyaWJ1dGUoYGRhdGEtdGl0bGVgKVxuICAgIGVsc2VcbiAgICAgIHJldHVybiBgYDtcbiAgfVxuXG4gIGNvbnN0IGluZGljYXRvckhhbmRsZXJLZXlFdnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXljb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcbiAgICBjb25zdCB7aW5kaWNhdG9ycywgbGl2ZVJlZ2lvbn0gPSB0aGlzLmNvbmZpZy5nZXQoc2V0dGluZ3MpO1xuICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWxpdmVgLCBgb2ZmYCk7XG4gICAgc3dpdGNoKGtleWNvZGUpIHtcbiAgICAgIGNhc2UgMzc6XG4gICAgICBjYXNlIDM4OlxuICAgICAgICB0aGlzLnByZXYoKTtcbiAgICAgICAgaW5kaWNhdG9yc1t0aGlzLmdldEN1cnJJZHgoKV0uZm9jdXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM5OlxuICAgICAgY2FzZSA0MDpcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGluZGljYXRvcnNbdGhpcy5nZXRDdXJySWR4KCldLmZvY3VzKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICBsaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1saXZlYCwgYHBvbGl0ZWApXG4gICAgfSwgMTApO1xuICB9O1xuXG4gIGNsYXNzIENhcm91c2VsIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICBpZighIG9wdGlvbnMucm9vdCB8fCAhb3B0aW9ucy5zbGlkZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAncm9vdCcgb3IgJ3NsaWRlJyBpcyBub3QgZGVmaW5lZGApO1xuXG4gICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIGxpdmVSZWdpb246IG51bGwsXG4gICAgICAgIGxpdmVEaWN0aW9uYXJ5OiBudWxsLFxuICAgICAgICBpbmRpY2F0b3JSb290OiBudWxsLFxuICAgICAgICBpbmRpY2F0b3JzOiBbXSxcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuY29uZmlnID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgIHRoaXMuY3VycmVudElkeCA9IG5ldyBXZWFrTWFwKFtbY3VycmVudCwgMF1dKTtcbiAgICAgIHRoaXMuY29uZmlnLnNldChzZXR0aW5ncywgY29uZmlnKTtcblxuICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcm9vdCxcbiAgICAgICAgc2xpZGUsXG4gICAgICAgIHNsaWRlSXRlbXMsXG4gICAgICAgIHByZXZCdG4sXG4gICAgICAgIG5leHRCdG4sXG4gICAgICAgIGxpdmVSZWdpb24sXG4gICAgICAgIGxpdmVEaWN0aW9uYXJ5LFxuICAgICAgICBpbmRpY2F0b3JSb290LFxuICAgICAgICBpbmRpY2F0b3JzLFxuICAgICAgfSA9IHRoaXMuY29uZmlnLmdldChzZXR0aW5ncyk7XG4gICAgICBzbGlkZS5jbGFzc0xpc3QuYWRkKGBpcy1zZXRgKTtcblxuICAgICAgaWYobGl2ZVJlZ2lvbiA9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpdmVSZWdpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGBkaXZgKTtcbiAgICAgICAgY29uc3QgYW5ub3VuY2VDb250ZW50ID0gZ2V0QW5ub3VuY2VDb250ZW50KDAsIGxpdmVEaWN0aW9uYXJ5IHx8IHNsaWRlSXRlbXNbMF0pO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgY2xhc3NgLCBgc3Itb25seWApO1xuICAgICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIG5ld0xpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1saXZlYCwgYHBvbGl0ZWApO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1hdG9taWNgLCBgdHJ1ZWApO1xuICAgICAgICBuZXdMaXZlUmVnaW9uLnNldEF0dHJpYnV0ZShgYXJpYS1yZWxldmFudGAsIGB0ZXh0YCk7XG4gICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQobmV3TGl2ZVJlZ2lvbik7XG5cbiAgICAgICAgdGhpcy5jb25maWcuc2V0KHNldHRpbmdzLCB7XG4gICAgICAgICAgLi4udGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKSxcbiAgICAgICAgICBsaXZlUmVnaW9uOiBuZXdMaXZlUmVnaW9uXG4gICAgICAgIH0pO1xuICAgICAgfWVsc2Uge1xuICAgICAgICBjb25zdCBhbm5vdW5jZUNvbnRlbnQgPSBnZXRBbm5vdW5jZUNvbnRlbnQoMCwgbGl2ZURpY3Rpb25hcnkgfHwgc2xpZGVJdGVtc1swXSk7XG4gICAgICAgIGlmKGFubm91bmNlQ29udGVudCkgbGl2ZVJlZ2lvbi5pbm5lckhUTUwgPSBhbm5vdW5jZUNvbnRlbnQ7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWxpdmVgLCBgcG9saXRlYCk7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLWF0b21pY2AsIGB0cnVlYCk7XG4gICAgICAgIGxpdmVSZWdpb24uc2V0QXR0cmlidXRlKGBhcmlhLXJlbGV2YW50YCwgYHRleHRgKTtcbiAgICAgIH1cblxuICAgICAgaWYoaW5kaWNhdG9yUm9vdCkge1xuICAgICAgICBpbmRpY2F0b3JSb290LnNldEF0dHJpYnV0ZShgcm9sZWAsIGB0YWJsaXN0YCk7XG4gICAgICAgIGZvcihsZXQgaSA9IC0xLCBpbmRpY2F0b3I7IGluZGljYXRvciA9IGluZGljYXRvcnNbKytpXTspIHtcbiAgICAgICAgICBpbmRpY2F0b3Iuc2V0QXR0cmlidXRlKGByb2xlYCwgYHRhYmApO1xuICAgICAgICAgIGluZGljYXRvci5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsICh7Y3VycmVudFRhcmdldH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IEFycmF5LmZyb20oaW5kaWNhdG9ycykuaW5kZXhPZihjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuZ28oaWR4KTtcbiAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5kaWNhdG9yUm9vdC5hZGRFdmVudExpc3RlbmVyKGBrZXlkb3duYCwgaW5kaWNhdG9ySGFuZGxlcktleUV2dC5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJlT3JkZXJpbmcoMCwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG5cbiAgICAgIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm5leHQuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgICAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucHJldi5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICBlbWl0RXZlbnQoc2xpZGUsIGBpbml0YCwge2N1cnJlbnRJZHg6IHRoaXMuY3VycmVudElkeC5nZXQoY3VycmVudCl9KTtcbiAgICB9XG5cbiAgICBuZXh0KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGxldCBjdXJySWR4ID0gdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KSArIDE7XG4gICAgICBjdXJySWR4ID0gY3VycklkeCA+IHNsaWRlSXRlbXMubGVuZ3RoIC0gMSA/IDAgOiBjdXJySWR4O1xuICAgICAgdGhpcy5jdXJyZW50SWR4LnNldChjdXJyZW50LCBjdXJySWR4KTtcbiAgICAgIHJlT3JkZXJpbmcoMSwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG4gICAgICBhcHBseUFuaW1hdGUoc2xpZGUsIDEpO1xuXG4gICAgICBjb25zdCBhbm5vdW5jZUNvbnRlbnQgPSBnZXRBbm5vdW5jZUNvbnRlbnQoY3VycklkeCwgbGl2ZURpY3Rpb25hcnkgfHwgc2xpZGVJdGVtc1tjdXJySWR4XSk7XG4gICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIGxpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuXG4gICAgICBlbWl0RXZlbnQoc2xpZGUsIGBjaGFuZ2VkYCwge2N1cnJlbnRJZHg6IHRoaXMuY3VycmVudElkeC5nZXQoY3VycmVudCl9KTtcbiAgICB9XG5cbiAgICBwcmV2KCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGxldCBjdXJySWR4ID0gdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KSAtIDE7XG4gICAgICBjdXJySWR4ID0gY3VycklkeCA8IDAgPyBzbGlkZUl0ZW1zLmxlbmd0aCAtIDEgOiBjdXJySWR4O1xuICAgICAgdGhpcy5jdXJyZW50SWR4LnNldChjdXJyZW50LCBjdXJySWR4KTtcbiAgICAgIHJlT3JkZXJpbmcoLTEsIHNsaWRlSXRlbXMsIGluZGljYXRvcnMpO1xuICAgICAgYXBwbHlBbmltYXRlKHNsaWRlLCAtMSk7XG5cbiAgICAgIGNvbnN0IGFubm91bmNlQ29udGVudCA9IGdldEFubm91bmNlQ29udGVudChjdXJySWR4LCBsaXZlRGljdGlvbmFyeSB8fCBzbGlkZUl0ZW1zW2N1cnJJZHhdKTtcbiAgICAgIGlmKGFubm91bmNlQ29udGVudCkgbGl2ZVJlZ2lvbi5pbm5lckhUTUwgPSBhbm5vdW5jZUNvbnRlbnQ7XG5cbiAgICAgIGVtaXRFdmVudChzbGlkZSwgYGNoYW5nZWRgLCB7Y3VycmVudElkeDogdGhpcy5jdXJyZW50SWR4LmdldChjdXJyZW50KX0pO1xuICAgIH1cblxuICAgIGdvKGlkeCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBzbGlkZSxcbiAgICAgICAgc2xpZGVJdGVtcyxcbiAgICAgICAgaW5kaWNhdG9ycyxcbiAgICAgICAgbGl2ZVJlZ2lvbixcbiAgICAgICAgbGl2ZURpY3Rpb25hcnksXG4gICAgICB9ID0gdGhpcy5jb25maWcuZ2V0KHNldHRpbmdzKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRJZHggPSB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpO1xuICAgICAgY29uc3QgYW1vdW50ID0gaWR4IC0gY3VycmVudElkeDtcbiAgICAgIGNvbnN0IGFubm91bmNlQ29udGVudCA9IGdldEFubm91bmNlQ29udGVudChpZHgsIGxpdmVEaWN0aW9uYXJ5IHx8IHNsaWRlSXRlbXNbaWR4XSk7XG4gICAgICB0aGlzLmN1cnJlbnRJZHguc2V0KGN1cnJlbnQsIGlkeCk7XG4gICAgICByZU9yZGVyaW5nKGFtb3VudCwgc2xpZGVJdGVtcywgaW5kaWNhdG9ycyk7XG4gICAgICBhcHBseUFuaW1hdGUoc2xpZGUsIGFtb3VudCk7XG4gICAgICBpZihhbm5vdW5jZUNvbnRlbnQpIGxpdmVSZWdpb24uaW5uZXJIVE1MID0gYW5ub3VuY2VDb250ZW50O1xuICAgICAgZW1pdEV2ZW50KHNsaWRlLCBgY2hhbmdlZGAsIHtjdXJyZW50SWR4OiB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpfSk7XG4gICAgfVxuXG4gICAgZ2V0Q3VycklkeCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJZHguZ2V0KGN1cnJlbnQpXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBDYXJvdXNlbDtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IENhcm91c2VsOyJdLCJzb3VyY2VSb290IjoiIn0=